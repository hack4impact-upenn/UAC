{% extends "base.html" %}

{% block content %}

<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<!-- <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"> -->

 <!-- CDN for jQuery -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<!-- CDN for D3 Data Visualization Library -->
<script src="http://d3js.org/d3.v3.min.js"></script>

<script src="/static/js/jspdf/jspdf.min.js"></script>

<script src="/static/js/html2canvas/html2canvas.min.js"></script>
<script src="http://www.nihilogic.dk/labs/canvas2image/canvas2image.js"></script>

<!-- CDN for Bootstrap -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='results.css') }}" ></style>

<!-- Welcome -->
<div class="jumbotron">
    <h1>Welcome, <strong>{{name}}.</strong></h1>
</div>

<div class="row"> <h1>Please enter your costs:</h1></div>

<div class="panel panel-default">
    <div class="panel-body">
<div class="row">
    <div class="col-md-5">
        <!-- PDF iframed here-->
        <div><iframe src="">iframe</iframe></div>
    </div>
    <div class="col-md-5">
        <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Change values:</h3>
        </div>
        <div class="panel-body">
            <!-- FORM TO CHANGE SPENDING DATA VALUES -->
            <form id="costs_form" >
                <div class="form-group">
                    <label class="update" for="management">Management Expenses</label>
                    <input type="text" class="form-control" class="btn pull-right" id="management" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="legal">Legal Expenses</label>
                    <input type="text" class="form-control" id="legal" placeholder="">
                </div>
                <div class="form-group" >
                    <label class="update"for="accounting">Accounting Expenses</label>
                    <input type="text" class="form-control" id="accounting" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="lobbying">Lobbying Expenses</label>
                    <input type="text" class="form-control" id="lobbying" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="professional_fundraising">Professional Fundraising</label>
                    <input type="text" class="form-control" id="professional_fundraising" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="investment_management">Investment Management Expenses</label>
                    <input type="text" class="form-control" id="investment_management" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="advertising">Advertising Expenses</label>
                    <input type="text" class="form-control" id="advertising" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="office_expenses">Office Expenses</label>
                    <input type="text" class="form-control" id="office_expenses" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="information_technology">I.T. Expenses</label>
                    <input type="text" class="form-control" id="information_technology" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="interest_expense">Interest Expenses</label>
                    <input type="text" class="form-control" id="interest_expense" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="insurance">Insurance Expenses</label>
                    <input type="text" class="form-control" id="insurance" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="employee_benefits">Employee Benefits </label>
                    <input type="text" class="form-control" id="employee_benefits" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="pension_plan_contributions">Pension Plan Contributions</label>
                    <input type="text" class="form-control" id="pension_plan_contributions" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="other">Other Expenses</label>
                    <input type="text" class="form-control" id="other" placeholder="">
                </div>
                <div class="form-group">
                    <label class="update" for="total">Total Expenses</label>
                    <p id="total"> </p>
                </div>
                <div class="form-group">
                    <label class="update" for="total_revenue">Total Revenue</label>
                    <input type="text" class="form-control" id="total_revenue" placeholder="" value="{{revenue}}">
                </div>
                <button type="submit" class="btn btn-default" id="submit_button">Submit</button>
            </form>
        </div>
    </div>
    </div>
</div>
</div> <!-- ENTER COSTS PANEL BODY -->
</div> <!-- ENTER COSTS PANEL -->


    

<!-- Links to other websites and PDFs here -->
    <div> 
        <h2>Links to other websites and PDFs here</h2>
    </div>

<!-- Overall Numbers -->
<div class="jumbotron">
    <h2>The Numbers.</h2>
    <p> Your overhead amount is {{overhead}}</p>
    <!-- <p>With UAC, you can save <strong>${{savings}}</strong> every year.</p> -->
    <p>You are more cost-efficient than <strong>{{current_percentile}}%</strong> of other non-profits.</p>
    <p>With UAC, you could be more cost-efficient than <strong>{{uac_percentile}}%</strong> of other non-profits.</p>
</div>

    


<!-- -------------------------------------
     Comparison Chart 
     -------------------------------------->
    <div class="row"> 
        <h1>How Does <strong>{{name}}</strong> Stack Up?</h1>
    </div>

   

<div class="panel panel-default">
    <div class="row">
        <div class='col-md-4'>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title"> State: {{state}}</h3>
                </div>
                <div class="panel-body">
                    <!-- <div class="input-group">
                        <span class="input-group-addon" id="basic-addon1">Update state:</span>
                        <input type="text" class="form-control" placeholder="ex. MA" id="state_input" aria-describedby="basic-addon1">  
                    </div> -->
                    <select>
                        <option value="US">All states</option>
                        <option value="1">AL - Alabama</option>
                        <option value="2">AK - Alaska</option>
                        <option value="3">AZ - Arizona</option>
                        <option value="4">AR - Arkansas</option>
                        <option value="5">CA - California</option>
                        <option value="6">CO - Colorado</option>
                        <option value="7">CT - Connecticut</option>
                        <option value="8">DE - Delaware</option>
                        <option value="9">FL - Florida</option>
                        <option value="10">GA - Georgia</option>
                        <option value="11">HI - Hawaii</option>
                        <option value="12">ID - Idaho</option>
                        <option value="13">IL - Illinois</option>
                        <option value="14">IN - Indiana</option>
                        <option value="15">IA - Iowa</option>
                        <option value="16">KS - Kansas</option>
                        <option value="17">KY - Kentucky</option>
                        <option value="18">LA - Louisiana</option>
                        <option value="19">ME - Maine</option>
                        <option value="20">MD - Maryland</option>
                        <option value="21">MA - Massachusetts</option>
                        <option value="22">MI - Michigan</option>
                        <option value="23">MN - Minnesota</option>
                        <option value="24">MS - Mississippi</option>
                        <option value="25">MO - Missouri</option>
                        <option value="26">MT - Montana</option>
                        <option value="27">NE - Nebraska</option>
                        <option value="28">NV - Nevada</option>
                        <option value="29">NH - New Hampshire</option>
                        <option value="30">NJ - New Jersey</option>
                        <option value="31">NM - New Mexico</option>
                        <option value="32">NY - New York</option>
                        <option value="33">NC - North Carolina</option>
                        <option value="34">ND - North Dakota</option>
                        <option value="35">OH - Ohio</option>
                        <option value="36">OK - Oklahoma</option>
                        <option value="37">OR - Oregon</option>
                        <option value="38">PA - Pennsylvania</option>
                        <option value="39">RI - Rhode Island</option>
                        <option value="40">SC - South Carolina</option>
                        <option value="41">SD - South Dakota</option>
                        <option value="42">TN - Tennessee</option>
                        <option value="43">TX - Texas</option>
                        <option value="44">UT - Utah</option>
                        <option value="45">VT - Vermont</option>
                        <option value="46">VA - Virginia</option>
                        <option value="47">WA - Washington</option>
                        <option value="48">WV - West Virginia</option>
                        <option value="49">WI - Wisconsin</option>
                        <option value="50">WY - Wyoming</option>
                    </select>
                </div> 
            </div> <!-- Panel for State Submit-->
        </div> <!-- col 1 -->
        <div class='col-md-4'>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">NTEE Code: {{ntee_code}}</h3>
                </div>
                <div class="panel-body">
                    <!-- <div class="input-group">
                        <span class="input-group-addon" id="basic-addon1">Update NTEE code:</span>
                        <input type="text" class="form-control" placeholder="ex. A23" id="NTEE_input" aria-describedby="basic-addon1">
                        
                    </div> -->
                    <select>
                        <option value="All">All codes</option>
                        <option value="A">A - Arts, Culture, and Humanities</option>
                        <option value="B">B - Educational Institutions</option>
                        <option value="C">C - Environmental Quality Protection, Beautification</option>
                        <option value="D">D - Animal Related</option>
                        <option value="E">E - Health â€” General & Rehabilitative</option>
                        <option value="F">F - Mental Health, Crisis Intervention</option>
                        <option value="G">G - Disease, Disorders, Medical Disciplines</option>
                        <option value="H">H - Medical Research</option>
                        <option value="I">I - Crime, Legal Related</option>
                        <option value="J">J - Employment, Job Related</option>
                        <option value="K">K - Agriculture, Food, Nutrition</option>
                        <option value="L">L - Housing, Shelter</option>
                        <option value="M">M - Public Safety, Disaster Preparedness and Relief</option>
                        <option value="N">N - Recreation, Sports, Leisure, Athletics</option>
                        <option value="O">O - Youth Development</option>
                        <option value="P">P - Human Services</option>
                        <option value="Q">Q - International, Foreign Affairs, and National Security</option>
                        <option value="R">R - Civil Rights, Social Action, Advocacy</option>
                        <option value="S">S - Community Improvement, Capacity Building</option>
                        <option value="T">T - Philanthropy, Voluntarism, and Grantmaking</option>
                        <option value="U">U - Science and Technology Research Institutes</option>
                        <option value="V">V - Social Science Research Institutes</option>
                        <option value="W">W - Public, Society Benefit</option>
                        <option value="X">X - Religion, Spiritual Development</option>
                        <option value="Y">Y - Mutual/Membership Benefit Organizations, Other</option>
                        <option value="Z">Z - Unknown</option>

                    </select>
                </div> 
            </div> <!-- Panel for NTEE Submit-->
        </div> <!-- col 2 -->
        <div class='col-md-4'>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Revenue: ${{revenue}}</h3>
                </div>
                <div class="panel-body">
                    <select>
                        <option value="0k">under $50,000</option>
                        <option value="50k">$50,000-$250,000</option>
                        <option value="250k">$250,000-$1M</option>
                        <option value="1M">$1M-$5M</option>
                        <option value="5M">$5M-$10M</option>
                        <option value="10M">$10M and over</option>
                    </select>
                </div>
            </div>
        </div> <!-- col 3 -->
    </div> <!-- Row 1-->

    
    <div class="row">
        <div class="col-md-9"></div>
        <div class="col-md-3"><button class="btn btn-default" id="btn_submit_state_ntee" type="submit">Update</button></div>
    </div>
</div> <!-- panel for ntee, state, and revenue group updates -->

    <div class="panel panel-default">
        <div class="panel-body">
            <div class="row"> 
        <div class='col-md-1'>
            <!-- Labels for bars -->
            <p class="labels" class="LLLLLL">Total</p>
            <p class="labels">Legal</p>
            <p class="labels">Accounting</p>
            <p class="labels">Lobbying</p>
            <p class="labels">Professional Fundraising</p>
            <p class="labels">Investment Management</p>
            <p class="labels">Advertising</p>
            <p class="labels">Office Expenses</p>
            <p class="labels">Information Technology</p>
            <p class="labels">Interest Expense</p>
            <p class="labels">Insurance</p>
            <p class="labels">Employee benefits</p>
            <p class="labels">Other</p>
        </div>
        <div class="col-md-8">
            <div id="svg2_container"> 
                <!-- Comparison SVG/Chart inserted here -->
            </div>
        </div>
        <div class="col-md-1">
        </div>
    </div>
        </div>
    </div>

    


    <!-- 
         Costs/Savings by Categories Chart 
         -->
    <div class="row"> 
        <h1>Savings Breakdown</h1>
    </div>

    <div class="panel panel-default">        
        <div class="panel-body">

            <div class="row"> 
                <div class="col-md-3"><span class="glyphicon glyphicon-stop" style="color:#DC4E00" aria-hidden="true">  Current Costs</span></div>
            </div>
            <div class="row"> 
                <div class="col-md-3"><span class="glyphicon glyphicon-stop" style="color:#89CEDE" aria-hidden="true">  Costs with UAC</span></div>
            </div>
            <div class="row"> 
                <div class="col-md-9">
                    <div id="svg_container"> 
                    </div>
                </div>  
                <div class="col-md-3"> 
                    
                    
                </div>
            </div>
        </div> <!-- PANEL BODY -->
    </div> <!-- PANEL -->

    <div class="row"> 
        <button id="pdfbutton" type="button" class="btn btn-default">Submit Form</button></a>
        <div id="png"></div>

    </div>



<script type="text/javascript">
$('#pdfbutton').click(function() {
    window.location.href = '#';
    html2canvas(document.body, {
        onrendered: function(canvas) {
            console.log("hi");
            var image = canvas.toDataURL("image/png");
            console.log("before");
            $('#png').html('<a href="' + image + '" download><button type="button" class="btn btn-default">Download</button></a>');
            //$('#down').href("#");
            //console.log("after");


            console.log("HI");
        }
    });
});
</script>



<script type="text/javascript" src="{{ url_for('static', filename='results.js') }}"></script>



{% endblock %}
